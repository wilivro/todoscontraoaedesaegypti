define(function(require){function _setConfig(config){_configEDI=config}function _init(texto,palavra,settings){function animacaoDoEspiral(self,seuStop){var aX=parseFloat($(self).css("left"))+parseFloat($(self).css("height"))/2,aY=parseFloat($(self).css("top")+parseFloat($(self).css("width"))/2),bX=parseFloat($(seuStop).css("left")),bY=parseFloat($(seuStop).css("top")),raioEspiral=Math.sqrt(Math.pow(Math.abs(aY-bY),2)+Math.pow(Math.abs(aX-bX),2));fps=10,$("#palavra1").css("top","2px");var x1=parseFloat($(self).css("left")),y1=0,cont=0,C=5,anima=this;return this.interval=setInterval(function(){r=C*Math.exp(.05*cont),r>raioEspiral&&(r=raioEspiral);var posEspiralx=r*Math.cos(cont)*-1+x1,posEspiraly=r*Math.sin(cont)+y1;cont+=.1,$(self).css({left:posEspiralx,top:posEspiraly});var r1_x=parseFloat($(self).offset().left),r1_y=parseFloat($(self).offset().top),r1_h=parseFloat($(self).height()),r1_w=parseFloat($(self).width()),r2_x=parseFloat($(seuStop).offset().left),r2_y=parseFloat($(seuStop).offset().top),r2_h=parseFloat($(seuStop).height()),r2_w=parseFloat($(seuStop).width());colide(r1_x,r1_y,r1_h,r1_w,r2_x,r2_y,r2_h,r2_w,anima.interval)},fps),{interval:null}}function colide(r1_x,r1_y,r1_h,r1_w,r2_x,r2_y,r2_h,r2_w,end){return r2_x>r1_x+r1_w||r1_x>r2_x+r2_w||r2_y>r1_y+r1_h||r1_y>r2_y+r2_h?!1:(log(end),clearInterval(end),!0)}edi.iniciar(_configEDI);var config={};settings&&$.extend(config,settings);var $conteudo=$("#conteudo");$conteudo.css("background-Color","#000");for(var containerGeral=$("<section>").css({position:"absolute",width:788,height:330,top:80,textAlign:"center",left:($conteudo.width()-788)/2}).appendTo("#conteudo"),dv_ficaPalavras=$("<div>").attr("id","ficaPalavras").css({position:"absolute",top:(containerGeral.height()-40)/2,left:(containerGeral.width()-20)/2,width:20,height:20,textAlign:"center",backgroundColor:edi.util.corAleatoria()}).appendTo(containerGeral),i=0;i<palavra.length;i++){for(var aux="",j=0;j<palavra[i].length;j++)aux+="_";var dv_palavras=$("<div>").addClass("palavras").attr("id","palavra"+i).attr("data-palavra",palavra[i]).css({position:"absolute",textAlign:"center",color:"#FFF"}).appendTo(dv_ficaPalavras).html(palavra[i]);dv_palavras.css("left",(dv_ficaPalavras.width()-dv_palavras.width())/2),texto=texto.replace("{"+i+"}",'<div id="palavraNoTexto'+i+'" class="noTexto" style="display:inline-block;" data-palavraTexto=\''+palavra[i]+"'>"+aux+"</div>")}$("<div>").css({position:"absolute",width:641,top:180,textAlign:"center",left:(containerGeral.width()-641)/2,lineHeight:"27px",color:"#FFF",fontSize:"17px"}).html(texto).appendTo(containerGeral);$(".noTexto").each(function(index){var posy=$(this).offset().top-$(containerGeral).offset().top+$(this).height()/2-1,posx=$(this).offset().left-$(containerGeral).offset().left+$(this).width()/2-1,_x=Math.sin(0*Math.PI)*posx,_y=Math.cos(0*Math.PI)*posy;$("#palavra"+index).attr({posx:_x,posy:_y});$("<div>").attr("id","quadrado"+index).css({position:"absolute",top:posy,left:posx,width:1,height:1,backgroundColor:"#9c0"}).appendTo(containerGeral)});var cont2=0,umAtrasDoOutro=setInterval(function(){new animacaoDoEspiral($("#palavra"+cont2),$("#quadrado"+cont2));cont2++,cont2==palavra.length&&clearInterval(umAtrasDoOutro)},1e3);ARR_TAREFAS[tarefaRevela].resolve()}var tarefaRevela=addTarefa(),edi=require("../lib/edi"),_configEDI=null;return{objetivos:[],setConfig:_setConfig,revela_espiral:_init}});