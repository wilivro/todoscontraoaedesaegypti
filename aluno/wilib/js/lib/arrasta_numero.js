define(function(require){function _setConfig(config){_configEDI=config}function _init(alternativas,callBack,callBackFinal,settings){function embaralhar(arr){for(var valorTemporaio,indexAleatorio,indexAtual=arr.length;0!==indexAtual;)indexAleatorio=Math.floor(Math.random()*indexAtual),indexAtual-=1,valorTemporaio=arr[indexAtual],arr[indexAtual]=arr[indexAleatorio],arr[indexAleatorio]=valorTemporaio;return arr}function adicionando(b){$("<div>").addClass("_arrasta").css({width:config.arrastaConfig.tamanhoArrasta,height:config.arrastaConfig.tamanhoArrasta,fontSize:.6*config.arrastaConfig.tamanhoArrasta,color:"#fff",position:"absolute",top:config.arrastaConfig.height/2-config.arrastaConfig.tamanhoArrasta/2-6,fontWeight:"bold",lineHeight:config.arrastaConfig.numeroLineHeight,textAlign:"center",background:"linear-gradient(to bottom, #BDDD5D, #7CB432)",boxShadow:"1px 1px 3px rgba(0, 0, 0, 0.3),inset 0 0 3px rgba(0, 0, 0, 0.3),inset 0 10px 1px 1px  rgba(255, 255, 255, 0.1)",borderRadius:"50%",border:"4px solid #fff",cursor:"pointer",display:"none"}).html(b.attr("data-index")).appendTo("#arrasta"+b.attr("data-index")).fadeIn()}edi.iniciar(_configEDI);alternativas.forEach(function(obj,i){obj.dataCorreta=i+1});var config={embaralhar:!0,arrastaConfig:{width:260,height:47,left:10,top:10,tamanhoArrasta:30,numeroLineHeight:1.7,fontSize:13,textAlign:"center"},alvoConfig:{width:320,height:47,fontSize:12,left:445,top:10,textAlign:"center"},reloadCorreta:!1};settings&&$.extend(config,settings);var $arrasta=$("<section>").addClass("arrasta_numero").css({width:"100%",height:315,position:"absolute"}).attr("data-edi","arrasta_numero").appendTo("#conteudo"),$arrastaConteudo=$("<div>").addClass("arrastaConteudo").css({position:"absolute",left:config.arrastaConfig.left,top:config.arrastaConfig.top,background:"linear-gradient(to bottom, #fff, #eee)",padding:5,display:"table",borderRadius:5,boxShadow:"1px 1px 1px 1px rgba(0, 0, 0, 0.2)"}).appendTo($arrasta),alter=($("<div>").addClass("alvoConteudo").css({position:"absolute",left:config.alvoConfig.left,top:config.alvoConfig.top,background:"linear-gradient(to bottom, #fff, #eee)",padding:5,display:"table",borderRadius:5,boxShadow:"1px 1px 1px 1px rgba(0, 0, 0, 0.2)"}).appendTo($arrasta),alternativas);if(config.embaralhar&&(alter=embaralhar(alternativas)),alter.forEach(function(obj,i){var $item=$("<div>").addClass("item").css({width:config.arrastaConfig.width,height:config.arrastaConfig.height,position:"relative"}).attr({"data-index":i+1,id:"arrasta"+(i+1)}).appendTo($arrastaConteudo),$arrTexto=($("<div>").addClass("arrasta").css({width:config.arrastaConfig.tamanhoArrasta,height:config.arrastaConfig.tamanhoArrasta,fontSize:.6*config.arrastaConfig.tamanhoArrasta,color:"#fff",position:"absolute",top:config.arrastaConfig.height/2-config.arrastaConfig.tamanhoArrasta/2-6,fontWeight:"bold",lineHeight:config.arrastaConfig.numeroLineHeight,textAlign:"center",background:"linear-gradient(to bottom, #85929C, #516472)",borderRadius:"50%",border:"4px solid #fff",boxShadow:"1px 1px 3px rgba(0, 0, 0, 0.3),inset 0 0 3px rgba(0, 0, 0, 0.3),inset 0 10px 1px 1px  rgba(255, 255, 255, 0.1)",cursor:"pointer"}).html(i+1).attr({"data-index":i+1,"data-correta":obj.dataCorreta}).appendTo($item).mouseenter(function(){$(this).css({background:"linear-gradient(to bottom, #BDDD5D, #7CB432)",boxShadow:"1px 1px 3px rgba(0, 0, 0, 0.3),inset 0 0 3px rgba(0, 0, 0, 0.3),inset 0 10px 1px 1px  rgba(255, 255, 255, 0.2)"})}).mouseout(function(){$(this).css({background:"linear-gradient(to bottom, #85929C, #516472)",boxShadow:"1px 1px 3px rgba(0, 0, 0, 0.3),inset 0 0 3px rgba(0, 0, 0, 0.3)inset 0 10px 1px 1px  rgba(255, 255, 255, 0.1)"})}),$("<div>").addClass("texto").attr("data-index",i+1).css({width:config.arrastaConfig.width-config.arrastaConfig.tamanhoArrasta-15,height:config.arrastaConfig.height,position:"absolute",left:config.arrastaConfig.tamanhoArrasta+15}).appendTo($item)),t=$("<div>").css({width:"100%",textAlign:config.arrastaConfig.textAlign,fontSize:config.arrastaConfig.fontSize,textShadow:"1px 1px 1px rgba(0, 0, 0, 0.1)"}).html(alter[i].arrasta).appendTo($arrTexto);t.css("margin-top",config.arrastaConfig.height/2-t.height()/2)}),alter=embaralhar(alter),alter.forEach(function(obj,i){var $item=$("<div>").addClass("item").attr("data-index",i+1).css({width:config.alvoConfig.width,height:config.alvoConfig.height,position:"relative"}).appendTo(".alvoConteudo"),$arrTexto=($("<div>").addClass("alvo").attr({"data-index":i+1,"data-correta":obj.dataCorreta}).css({width:config.arrastaConfig.tamanhoArrasta+8,height:config.arrastaConfig.tamanhoArrasta+8,position:"absolute",top:config.arrastaConfig.height/2-config.arrastaConfig.tamanhoArrasta/2-6,background:"linear-gradient(to bottom, #fff, #eee)",borderRadius:"50%",boxShadow:"inset 1px 1px 3px rgba(0, 0, 0, 0.3)"}).appendTo($item),$("<div>").addClass("texto").css({width:config.alvoConfig.width-config.arrastaConfig.tamanhoArrasta-15,height:config.alvoConfig.height,position:"absolute",left:config.arrastaConfig.tamanhoArrasta+15}).attr("data-index",i+1).appendTo($item)),t=$("<div>").css({width:"100%",textAlign:config.alvoConfig.textAlign,fontSize:config.alvoConfig.fontSize,textShadow:"1px 1px 1px rgba(0, 0, 0, 0.1)"}).html(alter[i].alvo).appendTo($arrTexto);t.css("margin-top",config.arrastaConfig.height/2-t.height()/2)}),arrastaMod.arrasta("arrasta","alvo",function(a,b,c){c.unbind(),a?$(b).off().css({background:"linear-gradient(to bottom, #72BAE2, #1C8FD0)",boxShadow:"1px 1px 3px rgba(0, 0, 0, 0.3),inset 0 0 3px rgba(0, 0, 0, 0.3),inset 0 10px 1px 1px  rgba(255, 255, 255, 0.1)"}):$(b).off().css({background:"linear-gradient(to bottom, #E3727A, #D31826)",boxShadow:"1px 1px 3px rgba(0, 0, 0, 0.3),inset 0 0 3px rgba(0, 0, 0, 0.3),inset 0 10px 1px 1px  rgba(255, 255, 255, 0.1)"}),adicionando(b),callBack&&callBack(a)},function(a){callBackFinal&&callBackFinal(a)},{reloadCorreta:config.reloadCorreta}),config.reloadCorreta){var temp=edi.util.getURL("acertos");if(null!==temp)for(var acertos=temp.split(","),i=0;i<acertos.length;i++){var self=$('[data-id="'+acertos[i]+'"]');self.off().css({background:"linear-gradient(to bottom, #72BAE2, #1C8FD0)",boxShadow:"1px 1px 3px rgba(0, 0, 0, 0.3),inset 0 0 3px rgba(0, 0, 0, 0.3),inset 0 10px 1px 1px  rgba(255, 255, 255, 0.1)"}),adicionando(self)}}ARR_TAREFAS[tarefaarrasta_numero].resolve()}var tarefaarrasta_numero=addTarefa(),edi=require("../lib/edi"),_configEDI=null,arrastaMod=require("../lib/arrasta");return{objetivos:[],setConfig:_setConfig,arrasta_numero:_init}});