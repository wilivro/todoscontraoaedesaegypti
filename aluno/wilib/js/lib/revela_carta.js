define(function(require){function _setConfig(config){_configEDI=config}function _init(cartas,opt){function handleClick(){var $self=$(this);$self.css({border:"8px solid #99CC00",background:"none"}),$self.find("*").addClass("revelada").fadeIn(),$(".carta").removeClass("piscar").off("click"),index++,$(".carta#"+index).addClass("piscar").click(handleClick),console.log(index),peca.objetivos.pop(),peca.objetivos.unshift(1),edi.objetivos.pop(),edi.objetivos.unshift(1),edi.finalizar()}edi.iniciar(_configEDI);var config,peca=this,index=0,arrayCartas=[];config={left:0,top:0,width:88,height:110,random:!0},$.extend(config,opt);var $revelaCarta=$("<section>").attr({id:"revela-carta","data-edi":"revela-carta"}).appendTo("#conteudo"),$cartas=$("<div>").addClass("cartas").css({left:config.left,top:config.top}).appendTo($revelaCarta);cartas.forEach(function(carta,i){peca.objetivos.push(0),edi.objetivos.push(0);var $carta=$("<div>").attr("id",i).addClass("carta").html(carta).css({width:config.width,height:config.height});arrayCartas.push($carta)}),config.random&&arrayCartas.sort(function(){return 5-Math.random()}),arrayCartas.forEach(function(data){$(data).appendTo($cartas)}),$(".carta#0").addClass("piscar").click(handleClick),ARR_TAREFAS[tarefa].resolve()}var tarefa=addTarefa(),edi=require("./edi"),_configEDI=null;return{objetivos:[],setConfig:_setConfig,revela_carta:_init}});