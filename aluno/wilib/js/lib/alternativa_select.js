define(function(require){function _setConfig(config){_configEDI=config}function _init(texto,alternativas,callBack,callBackFinal,settings){edi.iniciar(_configEDI);var peca=this,_texto=texto,_objt=alternativas.length,config={width:680,height:200,textAlign:"center",fontSize:25,position:"absolute",left:50,top:130,lineHeight:1,salvarDados:!0};settings&&$.extend(config,settings);var $alterSelect=$("<section>").addClass("alter-select").attr("data-edi","alternativa_select").css(config).appendTo("#conteudo");config.salvarDados&&sessionStorage.getItem("dadosAlterSelect")&&(_texto=sessionStorage.getItem("dadosAlterSelect")),alternativas.forEach(function(obj,i){var $select='<span class="alter-select-tag" id="alter-select-tag-'+i+'" data-correta="'+obj.opcaoCorreta+'">';$select+="<ul>",obj.opcoes.forEach(function(obj,j){var $option='\n<li class="alter-option-tag" id="alter-option-tag-'+j+'" value="'+obj+'">'+obj+"</li>";$select+=$option}),$select+="\n</ul>",$select+="\n</span>",_texto=_texto.replace("{"+i+"}",$select),_texto=_texto.replace('<span class="errou" id="alter-select-tag-'+i+'"></span>',$select),$alterSelect.html(_texto)}),$(".alter-select-tag").each(function(){peca.objetivos.push(0),edi.objetivos.push(0)}),$(".alter-select-tag").click(function(){$(".alter-select-tag ul").hide(),$(this).find("ul").toggle()}),$(".alter-select-tag ul li").click(function(e){var self=$(this),atr=self.parent().parent().attr("data-correta"),value=self.html(),id=self.parent().parent().attr("id");if(console.log(self,id),peca.objetivos.pop(),edi.objetivos.pop(),value==atr?(self.parent().parent().replaceWith('<span class="acertou">'+value+"</span>"),edi.objetivos.unshift(1),callBack&&callBack(!0)):(self.parent().parent().replaceWith('<span class="errou" id="'+id+'">'+value+"</span>"),edi.objetivos.unshift(2),callBack&&callBack(!1)),config.salvarDados&&(sessionStorage.setItem("dadosAlterSelect",$(".alter-select").html().toString()),0===peca.objetivos.length)){var bkpHTML=$(".alter-select").html();$(".alter-select .errou").html(""),sessionStorage.setItem("dadosAlterSelect",$(".alter-select").html().toString()),$(".alter-select").html(bkpHTML)}edi.finalizar();var acertos=0;0===peca.objetivos.length&&callBackFinal&&($(".alter-select .acertou").each(function(){acertos++}),callBackFinal(acertos==_objt?!0:!1)),0===$(".alter-select .errou").length&&sessionStorage.clear()}),ARR_TAREFAS[tarefaalternativa_select].resolve()}var tarefaalternativa_select=addTarefa(),edi=require("../lib/edi"),_configEDI=null;return{objetivos:[],setConfig:_setConfig,alternativa_select:_init}});