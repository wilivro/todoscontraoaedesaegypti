define(function(require){function _setConfig(config){_configEDI=config}function _telaAtual(){return edi.util.getURL("quest")}function _init(src,callBack,settings){edi.iniciar(_configEDI);var stageScale=getScale(),config={width:300,height:300,left:10,top:10,background:"#ddd",numPecas:4,callBacks:null};settings&&$.extend(config,settings);var $quebraCabeca=$("<section>").addClass("quebra-cabeca").attr("data-edi","quebraCabeca").css({width:"100%",height:315,position:"absolute"}).appendTo("#conteudo"),$puzzleParent=$("<div>").addClass("puzzle-parent").attr("id","puzzle-parent").css({position:"absolute",left:config.left,top:config.top,width:config.width,height:config.height,transform:"scale("+1/stageScale+")"}).appendTo($quebraCabeca);$("<canvas>").addClass("puzzle-canvas").attr("id","puzzle-canvas").css({width:config.width,height:config.height}).appendTo($puzzleParent),new Puzzle("puzzle-parent",{src:src,largura:config.width,altura:config.height,numPieces:config.numPecas,backgroundColor:config.background,callBack:function(){edi.finalizar(),callBack&&callBack()},callBacks:config.callBacks}),ARR_TAREFAS[tarefaQuebraCabeca].resolve()}var tarefaQuebraCabeca=addTarefa(),edi=require("../lib/edi"),_configEDI=null;return{objetivos:[],setConfig:_setConfig,telaAtual:_telaAtual,quebraCabeca:_init}});