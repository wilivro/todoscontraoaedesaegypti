this.createjs=this.createjs||{},function(){"use strict";function Sound(){throw"Sound cannot be instantiated"}function SoundChannel(src,max){this.init(src,max)}function SoundInstance(){this.isDefault=!0,this.addEventListener=this.removeEventListener=this.removeAllEventListener=this.dispatchEvent=this.hasEventListener=this._listeners=this.interrupt=this.playFailed=this.pause=this.resume=this.play=this.beginPlaying=this.cleanUp=this.stop=this.setMasterVolume=this.setVolume=this.mute=this.setMute=this.getMute=this.setPan=this.getPosition=this.setPosition=function(){return!1},this.getVolume=this.getPan=this.getDuration=function(){return 0},this.playState=Sound.PLAY_FAILED,this.toString=function(){return"[Sound Default Sound Instance]"}}function BrowserDetect(){}var s=Sound;s.DELIMITER="|",s.AUDIO_TIMEOUT=8e3,s.INTERRUPT_ANY="any",s.INTERRUPT_EARLY="early",s.INTERRUPT_LATE="late",s.INTERRUPT_NONE="none",s.PLAY_INITED="playInited",s.PLAY_SUCCEEDED="playSucceeded",s.PLAY_INTERRUPTED="playInterrupted",s.PLAY_FINISHED="playFinished",s.PLAY_FAILED="playFailed",s.SUPPORTED_EXTENSIONS=["mp3","ogg","mpeg","wav","m4a","mp4","aiff","wma","mid"],s.EXTENSION_MAP={m4a:"mp4"},s.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([\/.]*?(?:[^?]+)?\/)?((?:[^\/?]+)\.(\w+))(?:\?(\S+)?)?$/,s.defaultInterruptBehavior=s.INTERRUPT_NONE,s.lastId=0,s.activePlugin=null,s.pluginsRegistered=!1,s.masterVolume=1,s.masterMute=!1,s.instances=[],s.idHash={},s.preloadHash={},s.defaultSoundInstance=null,s.addEventListener=null,s.removeEventListener=null,s.removeAllEventListeners=null,s.dispatchEvent=null,s.hasEventListener=null,s._listeners=null,createjs.EventDispatcher.initialize(s),s.sendFileLoadEvent=function(src){if(s.preloadHash[src])for(var i=0,l=s.preloadHash[src].length;l>i;i++){var item=s.preloadHash[src][i];if(s.preloadHash[src][i]=!0,s.hasEventListener("fileload")){var event=new createjs.Event("fileload");event.src=item.src,event.id=item.id,event.data=item.data,s.dispatchEvent(event)}}},s.getPreloadHandlers=function(){return{callback:createjs.proxy(s.initLoad,s),types:["sound"],extensions:s.SUPPORTED_EXTENSIONS}},s.registerPlugin=function(plugin){return s.pluginsRegistered=!0,null==plugin?!1:plugin.isSupported()?(s.activePlugin=new plugin,!0):!1},s.registerPlugins=function(plugins){for(var i=0,l=plugins.length;l>i;i++){var plugin=plugins[i];if(s.registerPlugin(plugin))return!0}return!1},s.initializeDefaultPlugins=function(){return null!=s.activePlugin?!0:s.pluginsRegistered?!1:!!s.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])},s.isReady=function(){return null!=s.activePlugin},s.getCapabilities=function(){return null==s.activePlugin?null:s.activePlugin.capabilities},s.getCapability=function(key){return null==s.activePlugin?null:s.activePlugin.capabilities[key]},s.initLoad=function(src,type,id,data,basePath){var details=s.registerSound(src,id,data,!1,basePath);return null==details?!1:details},s.registerSound=function(src,id,data,preload,basePath){if(!s.initializeDefaultPlugins())return!1;src instanceof Object&&(basePath=id,id=src.id,data=src.data,src=src.src);var details=s.parsePath(src,"sound",id,data);if(null==details)return!1;null!=id&&(s.idHash[id]=details.src);var numChannels=null;null!=data&&(isNaN(data.channels)?isNaN(data)||(numChannels=parseInt(data)):numChannels=parseInt(data.channels));var loader=s.activePlugin.register(details.src,numChannels);if(null!=loader&&(null!=loader.numChannels&&(numChannels=loader.numChannels),SoundChannel.create(details.src,numChannels),null!=data&&isNaN(data)?data.channels=details.data.channels=numChannels||SoundChannel.maxPerChannel():data=details.data=numChannels||SoundChannel.maxPerChannel(),null!=loader.tag?details.tag=loader.tag:loader.src&&(details.src=loader.src),null!=loader.completeHandler&&(details.completeHandler=loader.completeHandler),loader.type&&(details.type=loader.type)),0!=preload)if(s.preloadHash[details.src]||(s.preloadHash[details.src]=[]),s.preloadHash[details.src].push({src:src,id:id,data:data}),1==s.preloadHash[details.src].length)null==basePath&&(basePath=""),s.activePlugin.preload(details.src,loader,basePath);else if(1==s.preloadHash[details.src][0])return!0;return details},s.registerManifest=function(manifest,basePath){for(var returnValues=[],i=0,l=manifest.length;l>i;i++)returnValues[i]=createjs.Sound.registerSound(manifest[i].src,manifest[i].id,manifest[i].data,manifest[i].preload,basePath);return returnValues},s.removeSound=function(src){if(null==s.activePlugin)return!1;src instanceof Object&&(src=src.src),src=s.getSrcById(src);var details=s.parsePath(src);if(null==details)return!1;src=details.src;for(var prop in s.idHash)s.idHash[prop]==src&&delete s.idHash[prop];return SoundChannel.removeSrc(src),delete s.preloadHash[src],s.activePlugin.removeSound(src),!0},s.removeManifest=function(manifest){for(var returnValues=[],i=0,l=manifest.length;l>i;i++)returnValues[i]=createjs.Sound.removeSound(manifest[i].src);return returnValues},s.removeAllSounds=function(){s.idHash={},s.preloadHash={},SoundChannel.removeAll(),s.activePlugin.removeAllSounds()},s.loadComplete=function(src){var details=s.parsePath(src,"sound");return src=details?s.getSrcById(details.src):s.getSrcById(src),1==s.preloadHash[src][0]},s.parsePath=function(value,type,id,data){"string"!=typeof value&&(value=value.toString());for(var sounds=value.split(s.DELIMITER),ret={type:type||"sound",id:id,data:data},i=(s.getCapabilities(),0),l=sounds.length;l>i;i++){var sound=sounds[i],match=sound.match(s.FILE_PATTERN);if(null==match)return!1;var name=match[4],ext=match[5];return ret.name=name,ret.src=sound,ret.extension=ext,ret}return null},s.play=function(src,interrupt,delay,offset,loop,volume,pan){var instance=s.createInstance(src),ok=s.playInstance(instance,interrupt,delay,offset,loop,volume,pan);return ok||instance.playFailed(),instance},s.createInstance=function(src){if(!s.initializeDefaultPlugins())return s.defaultSoundInstance;src=s.getSrcById(src);var details=s.parsePath(src,"sound"),instance=null;return null!=details&&null!=details.src?(SoundChannel.create(details.src),instance=s.activePlugin.create(details.src)):instance=Sound.defaultSoundInstance,instance.uniqueId=s.lastId++,instance},s.setVolume=function(value){if(null==Number(value))return!1;if(value=Math.max(0,Math.min(1,value)),s.masterVolume=value,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(value))for(var instances=this.instances,i=0,l=instances.length;l>i;i++)instances[i].setMasterVolume(value)},s.getVolume=function(){return s.masterVolume},s.setMute=function(value){if(null==value||void 0==value)return!1;if(this.masterMute=value,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(value))for(var instances=this.instances,i=0,l=instances.length;l>i;i++)instances[i].setMasterMute(value);return!0},s.getMute=function(){return this.masterMute},s.stop=function(){for(var instances=this.instances,i=instances.length;i--;)instances[i].stop()},s.playInstance=function(instance,interrupt,delay,offset,loop,volume,pan){if(interrupt instanceof Object&&(delay=interrupt.delay,offset=interrupt.offset,loop=interrupt.loop,volume=interrupt.volume,pan=interrupt.pan),interrupt=interrupt||s.defaultInterruptBehavior,null==delay&&(delay=0),null==offset&&(offset=instance.getPosition()),null==loop&&(loop=0),null==volume&&(volume=instance.volume),null==pan&&(pan=instance.pan),0==delay){var ok=s.beginPlaying(instance,interrupt,offset,loop,volume,pan);if(!ok)return!1}else{var delayTimeoutId=setTimeout(function(){s.beginPlaying(instance,interrupt,offset,loop,volume,pan)},delay);instance.delayTimeoutId=delayTimeoutId}return this.instances.push(instance),!0},s.beginPlaying=function(instance,interrupt,offset,loop,volume,pan){if(!SoundChannel.add(instance,interrupt))return!1;var result=instance.beginPlaying(offset,loop,volume,pan);if(!result){var index=createjs.indexOf(this.instances,instance);return index>-1&&this.instances.splice(index,1),!1}return!0},s.getSrcById=function(value){return null==s.idHash||null==s.idHash[value]?value:s.idHash[value]},s.playFinished=function(instance){SoundChannel.remove(instance);var index=createjs.indexOf(this.instances,instance);index>-1&&this.instances.splice(index,1)},createjs.Sound=Sound,SoundChannel.channels={},SoundChannel.create=function(src,max){var channel=SoundChannel.get(src);return null==channel?(SoundChannel.channels[src]=new SoundChannel(src,max),!0):!1},SoundChannel.removeSrc=function(src){var channel=SoundChannel.get(src);return null==channel?!1:(channel.removeAll(),delete SoundChannel.channels[src],!0)},SoundChannel.removeAll=function(){for(var channel in SoundChannel.channels)SoundChannel.channels[channel].removeAll();SoundChannel.channels={}},SoundChannel.add=function(instance,interrupt){var channel=SoundChannel.get(instance.src);return null==channel?!1:channel.add(instance,interrupt)},SoundChannel.remove=function(instance){var channel=SoundChannel.get(instance.src);return null==channel?!1:(channel.remove(instance),!0)},SoundChannel.maxPerChannel=function(){return p.maxDefault},SoundChannel.get=function(src){return SoundChannel.channels[src]};var p=SoundChannel.prototype;p.src=null,p.max=null,p.maxDefault=100,p.length=0,p.init=function(src,max){this.src=src,this.max=max||this.maxDefault,-1==this.max&&this.max==this.maxDefault,this.instances=[]},p.get=function(index){return this.instances[index]},p.add=function(instance,interrupt){return this.getSlot(interrupt,instance)?(this.instances.push(instance),this.length++,!0):!1},p.remove=function(instance){var index=createjs.indexOf(this.instances,instance);return-1==index?!1:(this.instances.splice(index,1),this.length--,!0)},p.removeAll=function(){for(var i=this.length-1;i>=0;i--)this.instances[i].stop()},p.getSlot=function(interrupt,instance){for(var target,replacement,i=0,l=this.max;l>i;i++){if(target=this.get(i),null==target)return!0;interrupt==Sound.INTERRUPT_NONE&&target.playState!=Sound.PLAY_FINISHED||(0!=i?target.playState==Sound.PLAY_FINISHED||target.playState==Sound.PLAY_INTERRUPTED||target.playState==Sound.PLAY_FAILED?replacement=target:(interrupt==Sound.INTERRUPT_EARLY&&target.getPosition()<replacement.getPosition()||interrupt==Sound.INTERRUPT_LATE&&target.getPosition()>replacement.getPosition())&&(replacement=target):replacement=target)}return null!=replacement?(replacement.interrupt(),this.remove(replacement),!0):!1},p.toString=function(){return"[Sound SoundChannel]"},Sound.defaultSoundInstance=new SoundInstance,null==createjs.proxy&&(createjs.proxy=function(){throw"Proxy has been moved to an external file, and must be included separately."}),BrowserDetect.init=function(){var agent=window.navigator.userAgent;BrowserDetect.isFirefox=agent.indexOf("Firefox")>-1,BrowserDetect.isOpera=null!=window.opera,BrowserDetect.isChrome=agent.indexOf("Chrome")>-1,BrowserDetect.isIOS=agent.indexOf("iPod")>-1||agent.indexOf("iPhone")>-1||agent.indexOf("iPad")>-1,BrowserDetect.isAndroid=agent.indexOf("Android")>-1,BrowserDetect.isBlackberry=agent.indexOf("Blackberry")>-1},BrowserDetect.init(),createjs.Sound.BrowserDetect=BrowserDetect}();