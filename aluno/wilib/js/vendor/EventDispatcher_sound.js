this.createjs=this.createjs||{},function(){"use strict";var EventDispatcher=function(){},p=EventDispatcher.prototype;EventDispatcher.initialize=function(target){target.addEventListener=p.addEventListener,target.on=p.on,target.removeEventListener=target.off=p.removeEventListener,target.removeAllEventListeners=p.removeAllEventListeners,target.hasEventListener=p.hasEventListener,target.dispatchEvent=p.dispatchEvent,target._dispatchEvent=p._dispatchEvent},p._listeners=null,p._captureListeners=null,p.initialize=function(){},p.addEventListener=function(type,listener,useCapture){var listeners;listeners=useCapture?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var arr=listeners[type];return arr&&this.removeEventListener(type,listener,useCapture),arr=listeners[type],arr?arr.push(listener):listeners[type]=[listener],listener},p.on=function(type,listener,scope,once,data,useCapture){return listener.handleEvent&&(scope=scope||listener,listener=listener.handleEvent),scope=scope||this,this.addEventListener(type,function(evt){listener.call(scope,evt,data),once&&evt.remove()},useCapture)},p.removeEventListener=function(type,listener,useCapture){var listeners=useCapture?this._captureListeners:this._listeners;if(listeners){var arr=listeners[type];if(arr)for(var i=0,l=arr.length;l>i;i++)if(arr[i]==listener){1==l?delete listeners[type]:arr.splice(i,1);break}}},p.off=p.removeEventListener,p.removeAllEventListeners=function(type){type?(this._listeners&&delete this._listeners[type],this._captureListeners&&delete this._captureListeners[type]):this._listeners=this._captureListeners=null},p.dispatchEvent=function(eventObj,target){if("string"==typeof eventObj){var listeners=this._listeners;if(!listeners||!listeners[eventObj])return!1;eventObj=new createjs.Event(eventObj)}if(eventObj.target=target||this,eventObj.bubbles&&this.parent){for(var top=this,list=[top];top.parent;)list.push(top=top.parent);var i,l=list.length;for(i=l-1;i>=0&&!eventObj.propagationStopped;i--)list[i]._dispatchEvent(eventObj,1+(0==i));for(i=1;l>i&&!eventObj.propagationStopped;i++)list[i]._dispatchEvent(eventObj,3)}else this._dispatchEvent(eventObj,2);return eventObj.defaultPrevented},p.hasEventListener=function(type){var listeners=this._listeners,captureListeners=this._captureListeners;return!!(listeners&&listeners[type]||captureListeners&&captureListeners[type])},p.toString=function(){return"[EventDispatcher]"},p._dispatchEvent=function(eventObj,eventPhase){var l,listeners=1==eventPhase?this._captureListeners:this._listeners;if(eventObj&&listeners){var arr=listeners[eventObj.type];if(!arr||!(l=arr.length))return;eventObj.currentTarget=this,eventObj.eventPhase=eventPhase,eventObj.removed=!1,arr=arr.slice();for(var i=0;l>i&&!eventObj.immediatePropagationStopped;i++){var o=arr[i];o.handleEvent?o.handleEvent(eventObj):o(eventObj),eventObj.removed&&(this.off(eventObj.type,o,1==eventPhase),eventObj.removed=!1)}}},createjs.EventDispatcher=EventDispatcher}();