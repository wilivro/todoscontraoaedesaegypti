window.onload=function(){var Calculator=function(){var prevOperator,self=this,decimalMark=".",sum=0;self.display=ko.observable("0"),self.isShowingResult=ko.observable(!1),self.number=function(item,event){var button=event.target.innerText||event.target.textContent;if(self.isShowingResult()&&(self.clearDisplay(),self.isShowingResult(!1)),!(button==decimalMark&&self.display().indexOf(decimalMark)>-1)){var newValue="0"===self.display()&&button!=decimalMark?button:self.display()+button;self.display(newValue)}},self.operator=function(item,event){var button=event.target.innerText||event.target.textContent;if(!self.isShowingResult())switch(prevOperator){case"+":sum+=parseFloat(self.display(),10);break;case"-":sum-=parseFloat(self.display(),10);break;case"x":sum*=parseFloat(self.display(),10);break;case"รท":sum/=parseFloat(self.display(),10);break;default:sum=parseFloat(self.display(),10)}prevOperator&&self.display(sum),prevOperator="="===button?null:button,self.isShowingResult(!0)},self.negate=function(){if(!self.isShowingResult()&&"0"!==self.display()){var newValue="-"===self.display().substr(0,1)?self.display().substr(1):"-"+self.display();self.display(newValue)}},self.backspace=function(item,event){self.isShowingResult()||(self.display().length>1?self.display(self.display().substr(0,self.display().length-1)):self.clearDisplay())},self.clear=function(){prevOperator=null,self.clearDisplay(),sum=0},self.clearDisplay=function(){self.display("0")}};ko.applyBindings(new Calculator),function(){function fireEvent(element,event){if(document.createEvent){var evt=document.createEvent("HTMLEvents");return evt.initEvent(event,!0,!0),!element.dispatchEvent(evt)}var evt=document.createEventObject();return element.fireEvent("on"+event,evt)}function hasClass(ele,cls){return ele.className.match(new RegExp("(\\s|^)"+cls+"(\\s|$)"))}function addClass(ele,cls){hasClass(ele,cls)||(ele.className+=" "+cls)}function removeClass(ele,cls){if(hasClass(ele,cls)){var reg=new RegExp("(\\s|^)"+cls+"(\\s|$)");ele.className=ele.className.replace(reg," ")}}var calculatorKeys={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"x",107:"+",109:"-",110:".",111:"รท",8:"backspace",13:"=",46:"c",67:"c"},keycallback=function(e){if(e.keyCode in calculatorKeys){var element=document.getElementById("calculator-button-"+calculatorKeys[e.keyCode]);addClass(element,"active"),setTimeout(function(){removeClass(element,"active")},100),fireEvent(element,"click")}};document.addEventListener?document.addEventListener("keyup",keycallback,!1):document.attachEvent&&document.attachEvent("keyup",keycallback)}()};